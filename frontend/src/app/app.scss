/* === 全局设计系统 === */
:root {
  /* 颜色变量 */
  --primary-gradient: linear-gradient(135deg, #00c6fb 0%, #005bea 100%);
  
  /* 阴影系统：与侧边栏保持一致的深度阴影 */
  --shadow-deep: 
    0 20px 40px -10px rgba(0, 0, 0, 0.1), 
    0 0 0 1px rgba(0, 0, 0, 0.02); /* 加一个极细的内描边，增强质感 */
  
  --glass-surface: rgba(255, 255, 255, 0.75);
  --glass-border: 1px solid rgba(255, 255, 255, 0.4);
  
  --radius-lg: 28px; /* 统一大圆角 */
  
  --ease-elastic: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
  color: #1d1d1f;
  background: #f2f4f6; /* 兜底色 */
  overflow: hidden;
}

/* 滚动条美化 */
::-webkit-scrollbar { width: 0; } /* 隐藏滚动条保持美观，或者设置极细 */

/* 通用磨砂混合宏 */
.super-glass {
  background: var(--glass-surface);
  backdrop-filter: blur(40px) saturate(180%);
  -webkit-backdrop-filter: blur(40px) saturate(180%);
  border: var(--glass-border);
  box-shadow: 
    0 10px 30px -10px rgba(0, 0, 0, 0.05),
    inset 0 0 0 1px rgba(255,255,255,0.5);
}

/* === 1. 背景：纯净淡蓝 (Pale Blue) === */
.app-background {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
  /* 移除极光动画，改为静态淡蓝 */
  background-color: #eef2f9; 
  /* 可选：加一点极其微弱的渐变，更有质感 */
  background-image: linear-gradient(to bottom, #eef2f9 0%, #e6e9f0 100%);
}

.layout-wrapper {
  display: flex; height: 100vh; padding: 24px; box-sizing: border-box; gap: 24px;
}

/* === 2. 主舞台样式修正 (修复双层边框问题) === */

/* 外层容器：负责布局占位，不可见，不裁剪阴影 */
.island-stage {
  flex: 1; 
  background: transparent; 
  box-shadow: none; 
  border-radius: 0; /* 移除外层圆角 */
  position: relative; 
  overflow: visible; /* 关键：允许子元素的阴影显示出来 */
  display: flex; 
  flex-direction: column;
}

/* 内层容器：真正的视觉卡片 */
.stage-container {
  flex: 1; 
  height: 100%; 
  overflow: hidden; /* 内容裁剪 */
  
  /* 样式属性 */
  background: #fff; 
  border-radius: var(--radius-lg); /* 统一圆角 */
  box-shadow: var(--shadow-deep);  /* 统一阴影 */
  
  /* 这是一个 hack，解决 Safari/Chrome 某些版本圆角溢出的问题 */
  transform: translateZ(0); 
  
  /* 入场动画 */
  animation: cardPopIn 0.6s var(--ease-elastic) backwards;
  transform-origin: center center;
}

@keyframes cardPopIn {
  0% { 
    opacity: 0; 
    transform: scale(0.96) translateY(10px); 
    filter: blur(10px);
  }
  100% { 
    opacity: 1; 
    transform: scale(1) translateY(0); 
    filter: blur(0);
  }
}

/* === 全局提示框美化 === */
.mat-mdc-snack-bar-container {
  --mdc-snackbar-container-color: transparent !important;
  --mdc-snackbar-container-shape: 0 !important;
  margin-top: 20px !important; 
}

.mat-mdc-snack-bar-container .mdc-snackbar__surface {
  background: rgba(255, 255, 255, 0.9) !important;
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.6);
  border-radius: 50px !important;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1), 0 4px 10px rgba(0, 91, 234, 0.15) !important;
  padding: 0 8px !important;
  min-width: 0 !important; max-width: 400px !important;
}

.mat-mdc-snack-bar-container .mdc-snackbar__label {
  color: #333 !important; font-weight: 600 !important; font-family: -apple-system, sans-serif; font-size: 0.95rem; padding: 14px 20px !important;
}

.mat-mdc-snack-bar-container .mat-mdc-snack-bar-action {
  color: #005bea !important; font-weight: bold;
}

/* === Tooltip 美化 === */
.mat-mdc-tooltip .mdc-tooltip__surface {
  background-color: rgba(255, 255, 255, 0.9) !important;
  backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(255, 255, 255, 0.6) !important;
  color: #005bea !important;
  font-weight: 700 !important; font-size: 0.8rem !important;
  border-radius: 20px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08) !important;
  padding: 6px 12px !important;
}